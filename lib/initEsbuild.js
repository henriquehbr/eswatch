import{a as w,g as h}from"./chunk.AWNRRH2C.js";import l from"esbuild";import f from"rimraf";import m from"readline";var r,o=m.createInterface({input:process.stdin,output:process.stdout}),a=(e,t)=>new Promise(async s=>{t.clear&&console.clear(),r?.kill(),t.run?(o.pause(),r=h(e,t),r.on("close",()=>{o.resume(),t.watch?s():process.exit()})):(console.log(`${e.join(", ")} built successfully on ${t.outdir}`),o.close(),s())}),c=async e=>{for(let t of e)await t()},y=async(e,t)=>{let s=await w(e,t);!t.keepfiles&&f.sync(s.outdir);let n=t.watch&&await l.startService(),d=(n||l).build.bind(void 0,s),u=a.bind(void 0,e,t),i=[d,u];if(t.watch){let p=await import("chokidar");p.watch(t.watch).on("ready",async()=>await c(i)).on("change",async()=>await c(i))}else await c(i)};export{y as initEsbuild};
