var x=Object.create,p=Object.defineProperty,P=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,w=Object.getOwnPropertyNames,b=Object.getOwnPropertyDescriptor,C=t=>p(t,"__esModule",{value:!0}),O=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports),L=(t,e,s)=>{if(C(t),e&&typeof e=="object"||typeof e=="function")for(let o of w(e))!E.call(t,o)&&o!=="default"&&p(t,o,{get:()=>e[o],enumerable:!(s=b(e,o))||s.enumerable});return t},g=t=>t&&t.__esModule?t:L(p(t!=null?x(P(t)):{},"default",{value:t,enumerable:!0}),t),c=O((Q,y)=>{"use strict";y.exports=t=>{let e=/^\\\\\?\\/.test(t),s=/[^\u0000-\u0080]+/.test(t);return e||s?t:t.replace(/\\/g,"/")}});import{existsSync as F}from"fs";var I=async t=>{try{return await new Promise((e,s)=>F(t)?e(t):s(`Couldn't find ${t} entry point`))}catch(e){throw new Error(e)}},l=I;import{spawn as j}from"child_process";var v=t=>{let e=typeof t.run=="string"?t.run:`node ${t.outdir}`,[s]=e.split(" "),o=e.split(" ").slice(1),n=j(s,o,{stdio:"inherit"});return n},k=v;var m=g(c());import S from"path";import D from"tiny-glob";var G=async t=>{let e=S.normalize(t),s=m.default(e),o=await D(s),n=o.map(m.default);return n},d=G;import R from"minimist";var J=()=>{let t=R(process.argv.slice(2));return t},a=J;import h from"path";import{fileURLToPath as _}from"url";import{builtinModules as N}from"module";var z=h.dirname(_(import.meta.url)),B=async()=>{let t=a(),e=t.format==="esm"?t.splitting:!1,s=!!t.watch,o=t.outext?{".js":t.outext}:{".js":".js"},n=t.outdir??h.join(z,"build"),r=[...N];if(!t.standalone){let{getDependencies:i}=await import("./helpers/index.js");r.push(...await i())}return t.external&&r.push(...t.external),{splitting:e,incremental:s,outExtension:o,outdir:n,external:r}},f=B;import M from"is-glob";var T=async t=>{let e=t._.length<1&&!t.entry;if(e)throw new Error("Missing entry point");let s=t.entry?[t.entry]:t._,o=s.map(async i=>M(i)?await d(i):await l(i)),n=await Promise.all(o),r=n.flat();return r},u=T;import{readFileSync as U}from"fs";import V from"find-up";var dt=async()=>{let t=await V("package.json");if(t){let e=U(t,{encoding:"utf-8"}),s=JSON.parse(e),o=Object.keys(s.dependencies),n=Object.keys(s.devDependencies);return[...o,...n]}return[]};var gt=async()=>{let t=a(),e=await u(t),{external:s,incremental:o,outExtension:n,outdir:r,splitting:i}=await f();return{bundle:t.bundle,entryPoints:e,format:t.format,incremental:o,minify:t.minify,outdir:r,outExtension:n,platform:t.platform,...t.bundle&&{external:s,splitting:i}}};export{dt as a,gt as b,a as c,l as d,k as e,d as f,u as g,f as h};
